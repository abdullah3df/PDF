<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CV Builder — شبيه CV Shop</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;800&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <!-- Icons -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
  <!-- html2pdf for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" defer></script>
  <style>
    :root{
      --bg:#0b0d12;          /* خلفية الصفحة */
      --card:#11151d;        /* خلفية الكروت */
      --muted:#8b94a7;       /* نص ثانوي */
      --text:#e9eef7;        /* نص أساسي */
      --primary:#4f8cff;     /* اللون الرئيسي */
      --accent:#14b8a6;      /* لون ثانوي */
      --radius:18px;         /* إنحناء الزوايا */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:linear-gradient(180deg, #0b0d12, #0b0d12 40%, #0e1117 100%);
      font-family:"Cairo", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
    }
    .container{
      max-width:1200px; margin:24px auto; padding:16px; display:grid; gap:16px;
      grid-template-columns: 380px 1fr;
    }
    @media (max-width: 980px){
      .container{grid-template-columns: 1fr;}
    }
    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius);
      box-shadow: 0 20px 60px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04);
    }
    /* ===== Sidebar (Form) ===== */
    .sidebar{padding:18px 18px 8px; position:relative;}
    .brand{display:flex; align-items:center; gap:10px; margin-bottom:14px}
    .badge{font-size:12px; padding:4px 10px; border-radius:999px; background:rgba(79,140,255,.14); color:#bcd4ff; border:1px solid rgba(79,140,255,.25)}
    .brand h1{font-size:20px; font-weight:800; margin:0}.section{margin:14px 0; padding:12px; border-radius:14px; background:rgba(255,255,255,.02); border:1px dashed rgba(255,255,255,.08)}
.section h3{margin:0 0 8px; font-size:14px; letter-spacing:.3px; color:#cdd8ee}
.field{display:flex; flex-direction:column; gap:6px; margin:10px 0}
.field label{font-size:12px; color:var(--muted)}
.field input,.field textarea,.field select{
  background:#0e1219; color:var(--text); border:1px solid rgba(255,255,255,.08);
  border-radius:12px; padding:10px 12px; outline:none; font-size:14px;
}
.field textarea{min-height:90px; resize:vertical}
.row{display:grid; grid-template-columns:1fr 1fr; gap:8px}

.controls{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px}
.btn{
  cursor:pointer; border:1px solid rgba(255,255,255,.1); background:#0f1420; color:var(--text);
  padding:10px 14px; border-radius:12px; font-weight:700; font-size:14px;
  transition: .2s transform, .2s opacity, .2s background, .2s border;
}
.btn:hover{transform: translateY(-1px); border-color: rgba(255,255,255,.2)}
.btn.primary{background:linear-gradient(180deg, var(--primary), #2d6cff); border:none; color:white}
.btn.ghost{background:transparent}

.note{font-size:12px; color:var(--muted); margin-top:6px}

/* ===== Preview (Resume) ===== */
.preview-wrapper{padding:16px}
.preview-toolbar{display:flex; align-items:center; justify-content:space-between; margin-bottom:10px}
.preview-toolbar .title{font-size:14px; color:var(--muted)}

.resume{
  width:794px; /* A4 width @96dpi approx */
  min-height:1123px; /* A4 height */
  margin:auto; background:white; color:#1b1f26; border-radius:16px; overflow:hidden;
  box-shadow: 0 30px 70px rgba(0,0,0,.45);
}
@media (max-width: 900px){ .resume{width:100%;} }

/* Two templates: classic (no sidebar) & pro (sidebar) */
.tpl{display:none}
.tpl.active{display:block}

/* === Template: PRO (sidebar) === */
.tpl-pro{display:grid; grid-template-columns:260px 1fr; min-height:100%}
.tpl-pro .aside{background:#0f172a; color:#e8edf7; padding:22px}
.tpl-pro .aside .photo{width:110px; height:110px; border-radius:14px; overflow:hidden; border:4px solid rgba(255,255,255,.08); margin-bottom:14px}
.tpl-pro .aside img{width:100%; height:100%; object-fit:cover}
.tpl-pro .aside .h{font-size:18px; font-weight:800; margin:6px 0 2px}
.tpl-pro .aside .role{font-size:12px; color:#b9c2d6}
.line{height:1px; background:linear-gradient(90deg, transparent, rgba(255,255,255,.15), transparent); margin:14px 0}
.kvl{display:flex; flex-direction:column; gap:8px}
.kvl .k{font-size:12px; color:#b8c1d6}
.kvl .v{font-size:13px; font-weight:700}
.chip{display:inline-flex; align-items:center; padding:6px 10px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); border-radius:999px; font-size:12px; margin:4px 4px 0 0}

.tpl-pro .main{padding:26px 28px}
.section-h{font-weight:900; font-size:16px; letter-spacing:.3px; color:#0b1220; border-bottom:2px solid #e7eef8; padding-bottom:6px; margin:8px 0 12px}
.item{margin:8px 0 10px}
.item .top{display:flex; align-items:baseline; justify-content:space-between; gap:12px}
.item .t{font-size:14px; font-weight:800}
.item .s{font-size:12px; color:#5b6476}
.item p{margin:6px 0; font-size:13px; line-height:1.7}

/* === Template: CLASSIC (single column) === */
.tpl-classic{padding:32px}
.classic-header{display:flex; align-items:center; gap:14px; border-bottom:2px solid #ecf1fb; padding-bottom:10px}
.classic-header .photo{width:90px; height:90px; border-radius:12px; overflow:hidden; border:3px solid #eef2ff}
.classic-header .name{font-size:26px; font-weight:900}
.classic-header .role{color:#5a6478}

.grid-2{display:grid; grid-template-columns:1fr 1fr; gap:14px}
.box{background:#f7f9fe; border:1px solid #e6edfb; border-radius:12px; padding:12px}
.muted{color:#616a7c; font-size:12px}

/* Utility */
.hide{display:none !important}

  </style>
</head>
<body>
  <div class="container">
    <!-- ================= SIDEBAR ================= -->
    <aside class="sidebar panel" id="sidebar">
      <div class="brand">
        <span class="badge">CVAI — Builder</span>
        <h1>منشئ سيرة ذاتية احترافي</h1>
      </div><!-- الهوية -->
  <div class="section">
    <h3>البيانات الشخصية</h3>
    <div class="row">
      <div class="field">
        <label>الاسم الكامل</label>
        <input id="in-name" placeholder="عبدالله حكم" value="عبدالله حكم" />
      </div>
      <div class="field">
        <label>المسمى الوظيفي</label>
        <input id="in-role" placeholder="Front‑End Developer" value="Front‑End Developer" />
      </div>
    </div>
    <div class="row">
      <div class="field">
        <label>البريد الإلكتروني</label>
        <input id="in-email" placeholder="email@example.com" value="abdullah@example.com" />
      </div>
      <div class="field">
        <label>الهاتف</label>
        <input id="in-phone" placeholder="+49 151 2345678" value="+49 151 2345678" />
      </div>
    </div>
    <div class="row">
      <div class="field">
        <label>الموقع</label>
        <input id="in-loc" placeholder="Nürnberg, Germany" value="Nürnberg, Germany" />
      </div>
      <div class="field">
        <label>رابط (موقع/LinkedIn)</label>
        <input id="in-link" placeholder="linkedin.com/in/username" value="linkedin.com/in/abdullah" />
      </div>
    </div>
    <div class="field">
      <label>الصورة الشخصية (اختياري)</label>
      <input id="in-photo" type="file" accept="image/*" />
      <div class="note">يمكن تجاهلها إذا ما بدك صورة.</div>
    </div>
  </div>

  <!-- الملخص -->
  <div class="section">
    <h3>الملخص المهني</h3>
    <div class="field">
      <textarea id="in-summary" placeholder="نبذة مختصرة عن خبراتك وإنجازاتك">مطور واجهات أمامية بخبرة 4+ سنوات في بناء تطبيقات ويب عالية الأداء، شغوف بتحسين تجربة المستخدم وجودة الكود.</textarea>
    </div>
  </div>

  <!-- الخبرات -->
  <div class="section">
    <h3>الخبرات (حتى 3 وظائف)</h3>
    <div class="field">
      <label>الوظيفة #1 — العنوان / الشركة / المدة / الوصف</label>
      <input id="in-exp1-title" placeholder="Front‑End — CVAI" value="Front‑End Engineer — CVAI" />
      <div class="row">
        <input id="in-exp1-time" placeholder="2023 — 2025" value="2023 — 2025" />
        <input id="in-exp1-loc" placeholder="Remote" value="Remote" />
      </div>
      <textarea id="in-exp1-desc" placeholder="المهام والإنجازات">بناء واجهة منشئ سيرة ذاتية مع معاينة حية وتصدير PDF. تحسين الأداء وإمكانية الوصول.</textarea>
    </div>
    <div class="field">
      <label>الوظيفة #2</label>
      <input id="in-exp2-title" placeholder="UI Developer — X" value="UI Developer — WebStudio" />
      <div class="row">
        <input id="in-exp2-time" placeholder="2021 — 2023" value="2021 — 2023" />
        <input id="in-exp2-loc" placeholder="Berlin" value="Berlin" />
      </div>
      <textarea id="in-exp2-desc" placeholder="المهام والإنجازات">تطوير مكتبة مكونات داخلية وإطلاق موقع متجاوب لعملاء enterprise.</textarea>
    </div>
    <div class="field">
      <label>الوظيفة #3</label>
      <input id="in-exp3-title" placeholder="Intern — Y" value="Frontend Intern — AppHub" />
      <div class="row">
        <input id="in-exp3-time" placeholder="2020" value="2020" />
        <input id="in-exp3-loc" placeholder="Hamburg" value="Hamburg" />
      </div>
      <textarea id="in-exp3-desc" placeholder="المهام والإنجازات">مشاركة في بناء لوحات تحكم تفاعلية وإصلاحات أخطاء.</textarea>
    </div>
  </div>

  <!-- التعليم والمهارات -->
  <div class="section">
    <h3>التعليم والمهارات</h3>
    <div class="field">
      <label>التعليم</label>
      <input id="in-edu1" placeholder="B.Sc. Computer Science — TU Berlin (2019)" value="B.Sc. Computer Science — TU Berlin (2019)" />
      <input id="in-edu2" placeholder="دورة React متقدمة (2022)" value="دورة React متقدمة (2022)" />
    </div>
    <div class="field">
      <label>المهارات (مفصولة بفواصل)</label>
      <input id="in-skills" placeholder="HTML, CSS, JS, React, Tailwind, Git" value="HTML, CSS, JS, React, Tailwind, Git" />
    </div>
    <div class="field">
      <label>اللغات</label>
      <input id="in-langs" placeholder="العربية (C2), الألمانية (B2), الإنجليزية (C1)" value="العربية (C2), الألمانية (B2), الإنجليزية (C1)" />
    </div>
  </div>

  <!-- تخصيص -->
  <div class="section">
    <h3>التخصيص</h3>
    <div class="row">
      <div class="field">
        <label>القالب</label>
        <select id="in-template">
          <option value="pro" selected>Pro — شريط جانبي</option>
          <option value="classic">Classic — عمودي بسيط</option>
        </select>
      </div>
      <div class="field">
        <label>الاتجاه</label>
        <select id="in-dir">
          <option value="rtl" selected>عربي (RTL)</option>
          <option value="ltr">English (LTR)</option>
        </select>
      </div>
    </div>
    <div class="row">
      <div class="field">
        <label>الخط</label>
        <select id="in-font">
          <option value="Cairo" selected>Cairo (Arabic)</option>
          <option value="Inter">Inter (Latin)</option>
        </select>
      </div>
      <div class="field">
        <label>اللون الرئيسي</label>
        <input id="in-color" type="color" value="#4f8cff" />
      </div>
    </div>
    <div class="controls">
      <button class="btn primary" id="btn-generate">تحديث المعاينة</button>
      <button class="btn" id="btn-pdf">تنزيل PDF</button>
      <button class="btn ghost" id="btn-clear">تفريغ الحقول</button>
    </div>
    <div class="note">يتم إخفاء الحقول الفارغة تلقائيًا في المعاينة وملف الـ PDF.</div>
  </div>
</aside>

<!-- ================= PREVIEW ================= -->
<main class="preview-wrapper panel">
  <div class="preview-toolbar">
    <div class="title">معاينة السيرة الذاتية</div>
    <div class="note">جرّب تغيير القالب أو اللون وشاهد النتيجة فورًا.</div>
  </div>
  <div id="resume" class="resume">
    <!-- Template PRO -->
    <div id="tpl-pro" class="tpl tpl-pro active">
      <aside class="aside">
        <div class="photo hide" id="ph-pro"><img id="img-pro" alt="photo"></div>
        <div class="h" id="name-pro">عبدالله حكم</div>
        <div class="role" id="role-pro">Front‑End Developer</div>
        <div class="line"></div>
        <div class="kvl" id="contact-pro">
          <div><span class="k">البريد:</span><div class="v" id="email-pro">abdullah@example.com</div></div>
          <div><span class="k">الهاتف:</span><div class="v" id="phone-pro">+49 151 2345678</div></div>
          <div><span class="k">الموقع:</span><div class="v" id="loc-pro">Nürnberg, Germany</div></div>
          <div><span class="k">الرابط:</span><div class="v" id="link-pro">linkedin.com/in/abdullah</div></div>
        </div>
        <div class="line"></div>
        <div>
          <div class="k">المهارات</div>
          <div id="skills-pro"></div>
        </div>
        <div class="line"></div>
        <div>
          <div class="k">اللغات</div>
          <div id="langs-pro" class="muted"></div>
        </div>
      </aside>
      <section class="main">
        <div class="section-h">ملخص</div>
        <p id="summary-pro">مطور واجهات أمامية بخبرة 4+ سنوات في بناء تطبيقات ويب عالية الأداء، شغوف بتحسين تجربة المستخدم وجودة الكود.</p>

        <div class="section-h">الخبرات</div>
        <div id="exp-pro">
          <!-- items injected by JS -->
        </div>

        <div class="section-h">التعليم</div>
        <div id="edu-pro"></div>
      </section>
    </div>

    <!-- Template CLASSIC -->
    <div id="tpl-classic" class="tpl tpl-classic">
      <header class="classic-header">
        <div class="photo hide" id="ph-cl"><img id="img-cl" alt="photo"></div>
        <div>
          <div class="name" id="name-cl">عبدالله حكم</div>
          <div class="role" id="role-cl">Front‑End Developer</div>
          <div class="muted" id="contact-cl">abdullah@example.com • +49 151 2345678 • Nürnberg • linkedin.com/in/abdullah</div>
        </div>
      </header>

      <section style="margin-top:10px">
        <h3 class="section-h">ملخص</h3>
        <p id="summary-cl">مطور واجهات أمامية بخبرة 4+ سنوات في بناء تطبيقات ويب عالية الأداء.</p>
      </section>

      <section>
        <h3 class="section-h">خبرات العمل</h3>
        <div id="exp-cl"></div>
      </section>

      <section>
        <h3 class="section-h">التعليم</h3>
        <div id="edu-cl" class="grid-2"></div>
      </section>

      <section>
        <h3 class="section-h">المهارات</h3>
        <div id="skills-cl" class="box"></div>
      </section>

      <section>
        <h3 class="section-h">اللغات</h3>
        <div id="langs-cl" class="box"></div>
      </section>
    </div>
  </div>
</main>

  </div>  <script>
    // Helpers
    const $ = (sel) => document.querySelector(sel);
    const setText = (id, val) => { const el = $(id); if(!el) return; if(!val){ el.classList.add('hide'); } else { el.classList.remove('hide'); el.textContent = val; }}
    const empty = (v) => !v || !String(v).trim();

    function applyDirection(dir){
      document.documentElement.dir = dir;
      document.documentElement.lang = (dir === 'rtl') ? 'ar' : 'en';
    }

    function applyFont(font){
      document.body.style.fontFamily = `'${font}', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif`;
    }

    function applyPrimary(color){
      document.documentElement.style.setProperty('--primary', color);
      // decorate section headings in resume
      document.querySelectorAll('.section-h').forEach(h=>{ h.style.borderColor = color; });
      // chips color tint
      document.querySelectorAll('.chip').forEach(c=>{ c.style.borderColor = color; c.style.boxShadow = `inset 0 0 0 1px ${color}22`; });
    }

    function chipsFromCSV(csv){
      if(empty(csv)) return [];
      return csv.split(',').map(s=>s.trim()).filter(Boolean);
    }

    function updateResume(){
      const name = $('#in-name').value;
      const role = $('#in-role').value;
      const email = $('#in-email').value;
      const phone = $('#in-phone').value;
      const loc = $('#in-loc').value;
      const link = $('#in-link').value;
      const summary = $('#in-summary').value;

      const exp = [
        { t: $('#in-exp1-title').value, time: $('#in-exp1-time').value, loc: $('#in-exp1-loc').value, d: $('#in-exp1-desc').value },
        { t: $('#in-exp2-title').value, time: $('#in-exp2-time').value, loc: $('#in-exp2-loc').value, d: $('#in-exp2-desc').value },
        { t: $('#in-exp3-title').value, time: $('#in-exp3-time').value, loc: $('#in-exp3-loc').value, d: $('#in-exp3-desc').value },
      ].filter(e => !empty(e.t) || !empty(e.d));

      const edu = [ $('#in-edu1').value, $('#in-edu2').value ].filter(e=>!empty(e));
      const skills = chipsFromCSV($('#in-skills').value);
      const langs = $('#in-langs').value;

      const tpl = $('#in-template').value; // pro | classic

      // Toggle templates
      document.querySelectorAll('.tpl').forEach(t=>t.classList.remove('active'));
      (tpl === 'pro' ? $('#tpl-pro') : $('#tpl-classic')).classList.add('active');

      // === Fill PRO ===
      setText('#name-pro', name);
      setText('#role-pro', role);
      setText('#email-pro', email);
      setText('#phone-pro', phone);
      setText('#loc-pro', loc);
      setText('#link-pro', link);
      setText('#summary-pro', summary);
      const skillsPro = $('#skills-pro'); skillsPro.innerHTML = '';
      if(skills.length){
        skillsPro.classList.remove('hide');
        skills.forEach(s=>{ const el=document.createElement('span'); el.className='chip'; el.textContent=s; skillsPro.appendChild(el); });
      } else { skillsPro.classList.add('hide'); }
      setText('#langs-pro', langs);

      const expPro = $('#exp-pro'); expPro.innerHTML='';
      exp.forEach(e=>{
        const wrap = document.createElement('div'); wrap.className='item';
        wrap.innerHTML = `<div class="top"><div class="t">${e.t||''}</div><div class="s">${[e.time,e.loc].filter(Boolean).join(' — ')}</div></div>` +
                         (e.d?`<p>${e.d}</p>`:'');
        expPro.appendChild(wrap);
      });
      const eduPro = $('#edu-pro'); eduPro.innerHTML='';
      edu.forEach(x=>{ const p=document.createElement('p'); p.textContent=x; eduPro.appendChild(p); });

      // Show/hide contact block if all empty
      const contactEmpty = [email,phone,loc,link].every(empty);
      $('#contact-pro').classList.toggle('hide', contactEmpty);

      // === Fill CLASSIC ===
      setText('#name-cl', name);
      setText('#role-cl', role);
      const contactCl = [email, phone, loc, link].filter(x=>!empty(x)).join(' • ');
      setText('#contact-cl', contactCl);
      setText('#summary-cl', summary);
      const expCl = $('#exp-cl'); expCl.innerHTML='';
      exp.forEach(e=>{
        const box = document.createElement('div'); box.className='box';
        const top = [e.t, [e.time,e.loc].filter(Boolean).join(' — ')].filter(Boolean).join(' | ');
        box.innerHTML = `<div style="font-weight:800">${top}</div>` + (e.d?`<div class="muted" style="margin-top:6px; line-height:1.8">${e.d}</div>`:'');
        expCl.appendChild(box);
      });
      const eduCl = $('#edu-cl'); eduCl.innerHTML='';
      edu.forEach(x=>{ const b=document.createElement('div'); b.className='box'; b.textContent=x; eduCl.appendChild(b); });
      const skillsCl = $('#skills-cl'); skillsCl.textContent = skills.join(' • ');
      const langsCl = $('#langs-cl'); langsCl.textContent = langs;

      // Direction & font & color
      applyDirection($('#in-dir').value);
      applyFont($('#in-font').value);
      applyPrimary($('#in-color').value);

      // Hide empty lines (generic pass)
      document.querySelectorAll('#resume .tpl.active .hide-if-empty').forEach(el=>{
        el.classList.toggle('hide', empty(el.textContent));
      });
    }

    // Photo handling (optional)
    function handlePhoto(input, targets){
      const file = input.files && input.files[0];
      if(!file){ targets.forEach(t=>t.wrap.classList.add('hide')); return; }
      const reader = new FileReader();
      reader.onload = e => {
        targets.forEach(t=>{ t.img.src = e.target.result; t.wrap.classList.remove('hide'); });
      };
      reader.readAsDataURL(file);
    }

    // Export to PDF (A4, high quality)
    function exportPDF(){
      const node = document.getElementById('resume');
      const opt = {
        margin:       [10,10,10,10],
        filename:     `CV_${document.getElementById('in-name').value || 'document'}.pdf`,
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2, useCORS: true },
        jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' }
      };
      // Temporarily force white background
      const prevBg = node.style.backgroundColor;
      node.style.backgroundColor = '#ffffff';
      html2pdf().set(opt).from(node).save().then(()=>{ node.style.backgroundColor = prevBg; });
    }

    // Clear inputs
    function clearAll(){
      document.querySelectorAll('.sidebar input:not([type="color"]):not([type="file"])').forEach(i=> i.value='');
      document.querySelectorAll('.sidebar textarea').forEach(t=> t.value='');
      updateResume();
    }

    // Events
    window.addEventListener('DOMContentLoaded', () => {
      $('#btn-generate').addEventListener('click', updateResume);
      $('#btn-pdf').addEventListener('click', exportPDF);
      $('#btn-clear').addEventListener('click', clearAll);
      // Live update on change
      document.querySelectorAll('.sidebar input, .sidebar textarea, .sidebar select').forEach(el=>{
        el.addEventListener('input', ()=>{ if(el.id !== 'in-photo') updateResume(); });
        el.addEventListener('change', ()=>{ if(el.id !== 'in-photo') updateResume(); });
      });
      // Photo
      $('#in-photo').addEventListener('change', (e)=>{
        handlePhoto(e.target, [
          {wrap: $('#ph-pro'), img: $('#img-pro')},
          {wrap: $('#ph-cl'), img: $('#img-cl')}
        ]);
      });

      // Initial render
      updateResume();
    });
  </script></body>
</html>
