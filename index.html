<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ØµØ§Ù†Ø¹ Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ© â€” Ù…Ø¹Ø§ÙŠÙ†Ø© ÙŠØ¯ÙˆÙŠØ© ÙˆØªØµØ¯ÙŠØ± PDF</title>

<style>
:root{
  /* Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ù‡ÙŠØ¯Ø±) */
  --ui-brand:#2563eb; --ui-brand-2:#1e3a8a;
  --site-bg:#dce6f2; /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹ */

  /* Ø£Ù„ÙˆØ§Ù† ÙˆØ±Ù‚Ø© Ø§Ù„Ø³ÙŠØ±Ø© (Ø¯Ø§Ø®Ù„ Ø§Ù„ÙˆØ±Ù‚Ø©) */
  --accent:#3a6ea5;  /* Ù„ÙˆÙ† Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */
  --text:#0b1220; --muted:#475569; --chip:#1f2937;

  /* Ù‚ÙŠØ§Ø³Ø§Øª */
  --sheet-w:210mm; --sheet-h:297mm;
  --bar-w:56mm; /* Ø´Ø±ÙŠØ· Ø¬Ø§Ù†Ø¨ÙŠ Ù…Ù†Ø§Ø³Ø¨ØŒ ØºÙŠÙ‘Ø±Ù‡ Ù„Ù€ 50â€“60mm Ø­Ø³Ø¨ Ø°ÙˆÙ‚Ùƒ */
  --radius:14px;
}

*{box-sizing:border-box}
html,body{margin:0}
body{
  font-family:"Tajawal",system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--site-bg); color:#0b1220;
}

/* Ø±Ø£Ø³ ÙˆØ£Ø²Ø±Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (Ø£Ù„ÙˆØ§Ù†Ù‡Ø§ Ù…Ù†ÙØµÙ„Ø© Ø¹Ù† Ø§Ù„ÙˆØ±Ù‚Ø©) */
.header{max-width:980px;margin:16px auto 8px;padding:0 12px;display:flex;align-items:center;gap:10px;justify-content:space-between}
.brand{font-weight:800;display:flex;align-items:center;gap:8px}
.badge{font-size:12px;background:#fff;border:1px solid rgba(2,6,23,.12);padding:6px 10px;border-radius:999px;color:#334155}
.toolbar{max-width:980px;margin:0 auto 12px;padding:12px;display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
.btn{appearance:none;border:none;cursor:pointer;padding:10px 14px;border-radius:10px;background:linear-gradient(135deg,var(--ui-brand),var(--ui-brand-2));color:#fff;font-weight:800;box-shadow:0 6px 14px rgba(0,0,0,.18)}
.btn.ghost{background:#fff;color:#0b1220;border:1px solid rgba(2,6,23,.15);box-shadow:none;font-weight:700}

/* Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
.editor{max-width:980px;margin:0 auto 14px;background:#fff;border:1px solid rgba(2,6,23,.12);border-radius:14px;padding:12px}
label{font-weight:700;font-size:13px;margin-bottom:6px;display:block}
.input,textarea,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(2,6,23,.15);background:#fff;color:#0b1220;outline:none}
.help{font-size:12px;color:#64748b;margin:4px 2px 10px}
.grid{display:grid;gap:12px}
.two{grid-template-columns:1fr 1fr}
.three{grid-template-columns:repeat(3,1fr)}
@media (max-width:860px){.two,.three{grid-template-columns:1fr}}

/* Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© */
.sheet-wrap{max-width:calc(var(--sheet-w) + 32px);margin:0 auto 40px;padding:16px;border-radius:16px;background:#ffffffb3;border:1px solid rgba(2,6,23,.08)}
.sheet{width:var(--sheet-w);min-height:var(--sheet-h);background:#fff;position:relative;border-radius:var(--radius);overflow:hidden;box-shadow:0 24px 60px rgba(0,0,0,.22);color:var(--text)}

/* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ */
.sheet.with-sidebar .bar{position:absolute;top:0;bottom:0;right:0;width:var(--bar-w);background:var(--accent);color:#fff;border-radius:0 var(--radius) var(--radius) 0}
[dir="rtl"] .sheet.with-sidebar .bar{left:0;right:auto;border-radius:var(--radius) 0 0 var(--radius)}

.content{position:relative;z-index:2;padding:18mm}
.sheet.with-sidebar .content{padding-inline-end:calc(18mm + var(--bar-w) + 6mm)}
h1,h2,h3{margin:0 0 8px} h1{font-size:26px} h2{font-size:20px} h3{font-size:16px;border-bottom:2px solid var(--chip);display:inline-block;padding-bottom:2px;margin-top:14px}
.meta{display:flex;gap:12px;flex-wrap:wrap;color:#334155}
.chips{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
.chip{border:1px solid var(--chip);border-radius:999px;padding:6px 10px;font-size:12px}

/* Ø¨Ø·Ø§Ù‚Ø© ÙÙˆÙ‚ Ø§Ù„Ø´Ø±ÙŠØ· (ØªØ¹Ø±Ø¶ Ù…Ù‡Ø§Ø±Ø§Øª/Ù„ØºØ§Øª/ØªÙˆØ§ØµÙ„) */
.side-card{position:absolute;z-index:3;top:18mm;inset-inline-end:12mm;width:calc(var(--bar-w) - 24mm);background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:10px 12px;color:#0b1220}
[dir="rtl"] .side-card{inset-inline-start:12mm;inset-inline-end:auto}

/* ÙˆØ¶Ø¹ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
.print-mode .header,.print-mode .toolbar,.print-mode .editor{display:none!important}
.print-mode body,.print-mode .sheet-wrap{background:#fff!important}
.print-mode .sheet{box-shadow:none;border-radius:0}
@media print{
  body{margin:0;background:#fff!important}
  .header,.toolbar,.editor{display:none!important}
  .sheet-wrap{max-width:unset;border:0;padding:0;margin:0;background:#fff!important}
  .sheet{width:210mm!important;min-height:297mm!important;border-radius:0;box-shadow:none}
  @page{size:A4;margin:0}
}

/* Ù…ÙˆØ¨Ø§ÙŠÙ„ */
@media (max-width:520px){
  :root{--bar-w:48mm}
  .sheet.with-sidebar .content{padding:14mm}
  .side-card{display:none}
}
</style>
</head>
<body>

<!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø£Ù„ÙˆØ§Ù† Ù…Ù†ÙØµÙ„Ø©) -->
<div class="header">
  <div class="brand">ğŸ“„ <span>ØµØ§Ù†Ø¹ Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ©</span></div>
  <span class="badge">Ù…Ø¹Ø§ÙŠÙ†Ø© ÙŠØ¯ÙˆÙŠØ© â€¢ PDF Ù†Ø¸ÙŠÙ</span>
</div>
<div class="toolbar">
  <button class="btn" id="btnPreview">Ù…Ø¹Ø§ÙŠÙ†Ø©</button>
  <button class="btn" id="btnPrint">ØªØµØ¯ÙŠØ± PDF</button>
  <button class="btn ghost" id="btnToggle">Ø¥Ø¸Ù‡Ø§Ø± / Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</button>
</div>

<!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ (Ø¨ØªÙ„Ù…ÙŠØ­Ø§Øª ÙˆØ§Ø¶Ø­Ø©) -->
<div class="editor" id="editor">
  <div class="grid two">
    <div>
      <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
      <input id="i_name" class="input" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ Ø£Ùˆ Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ (Ù…Ø«Ø§Ù„: Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø­ÙƒÙ…)" />
      <div class="help">Ø³ÙŠØ¸Ù‡Ø± Ø£Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ±Ù‚Ø© Ø¨Ø­Ø¬Ù… ÙƒØ¨ÙŠØ±.</div>
    </div>
    <div>
      <label>Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</label>
      <input id="i_title" class="input" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø·ÙˆÙ‘Ø± ÙˆØ§Ø¬Ù‡Ø§Øª Ø£Ù…Ø§Ù…ÙŠØ© | React" />
      <div class="help">ÙŠÙØ¶Ù‘Ù„ Ø£Ù† ÙŠÙƒÙˆÙ† Ù…Ø®ØªØµØ±Ù‹Ø§ ÙˆÙˆØµÙÙŠÙ‹Ø§.</div>
    </div>
  </div>

  <div class="grid three">
    <div>
      <label>Ø§Ù„Ø¨Ø±ÙŠØ¯</label>
      <input id="i_email" class="input" placeholder="Ø§Ø³ØªØ®Ø¯Ù… Ø¨Ø±ÙŠØ¯Ù‹Ø§ Ø§Ø­ØªØ±Ø§ÙÙŠÙ‹Ø§ (name.lastname@gmail.com)" />
    </div>
    <div>
      <label>Ø§Ù„Ù‡Ø§ØªÙ</label>
      <input id="i_phone" class="input" placeholder="Ø±Ù‚Ù… Ù…Ø¹ Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø© (Ù…Ø«Ø§Ù„: +49 151 2345678)" />
    </div>
    <div>
      <label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</label>
      <input id="i_city" class="input" placeholder="Ù…Ø«Ø§Ù„: Berlin, DE" />
    </div>
  </div>

  <div>
    <label>Ø§Ù„Ø±Ø§Ø¨Ø· (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
    <input id="i_site" class="input" placeholder="LinkedIn Ø£Ùˆ Ù…ÙˆÙ‚Ø¹ Ø´Ø®ØµÙŠ (Ù…Ø«Ø§Ù„: linkedin.com/in/username)" />
  </div>

  <div>
    <label>Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ù‡Ù†ÙŠ</label>
    <textarea id="i_summary" rows="3" class="input" placeholder="3â€“4 Ø¬Ù…Ù„: Ø³Ù†ÙˆØ§Øª Ø®Ø¨Ø±Ø© + Ù…Ø¬Ø§Ù„ + Ø¥Ù†Ø¬Ø§Ø² Ù…Ù„Ø­ÙˆØ¸ + Ù…Ø§ ØªØ¨Ø­Ø« Ø¹Ù†Ù‡"></textarea>
  </div>

  <div class="grid two">
    <div>
      <label>Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª (Ø§ÙØµÙ„ Ø¨ÙÙˆØ§ØµÙ„)</label>
      <input id="i_skills" class="input" placeholder="JavaScript, React, CSS, Git" />
      <div class="help">Ø±ØªÙ‘Ø¨ Ù…Ù† Ø§Ù„Ø£Ù‚ÙˆÙ‰ Ù„Ù„Ø£Ù‚Ù„.</div>
    </div>
    <div>
      <label>Ø§Ù„Ù„ØºØ§Øª (Ø§ÙØµÙ„ Ø¨ÙÙˆØ§ØµÙ„ + Ù…Ø³ØªÙˆÙ‰)</label>
      <input id="i_langs" class="input" placeholder="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ø£Ù…)ØŒ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© B2" />
    </div>
  </div>

  <div class="grid two">
    <div>
      <label>Ø§Ù„Ø®Ø¨Ø±Ø§Øª â€” HTML Ø¨Ø³ÙŠØ·</label>
      <textarea id="i_exp" rows="5" class="input" placeholder="<p><strong>Ø§Ù„Ù…Ø³Ù…Ù‰</strong> â€” Ø§Ù„Ø´Ø±ÙƒØ© <span style='color:#64748b'>2022â€“Ø§Ù„Ø¢Ù†</span><br>â€¢ Ø¥Ù†Ø¬Ø§Ø² Ù…Ø®ØªØµØ±<br>â€¢ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø±Ø¦ÙŠØ³ÙŠØ©</p>"></textarea>
      <div class="help">ÙŠØ³Ù…Ø­ Ø¨Ù€ &lt;p&gt; Ùˆ &lt;strong&gt; Ùˆ &lt;br&gt; ÙˆØ§Ù„Ù†Ù‚Ø§Ø·.</div>
    </div>
    <div>
      <label>Ø§Ù„ØªØ¹Ù„ÙŠÙ… â€” HTML Ø¨Ø³ÙŠØ·</label>
      <textarea id="i_edu" rows="5" class="input" placeholder="<p><strong>Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠÙˆØ³ Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³ÙˆØ¨</strong> â€” Ø¬Ø§Ù…Ø¹Ø© X <span style='color:#64748b'>2021</span><br>Ù…Ø´Ø±ÙˆØ¹ ØªØ®Ø±Ø¬ / Ù…Ø¹Ø¯Ù„.</p>"></textarea>
    </div>
  </div>

  <div class="grid two">
    <div>
      <label>Ø§Ù„Ù‚Ø§Ù„Ø¨</label>
      <div style="display:flex;gap:12px;align-items:center">
        <label><input type="radio" name="tpl" value="sidebar" checked> Ø´Ø±ÙŠØ· Ø¬Ø§Ù†Ø¨ÙŠ</label>
        <label><input type="radio" name="tpl" value="classic"> Ø¨Ø¯ÙˆÙ† Ø´Ø±ÙŠØ·</label>
      </div>
      <div class="help">Ø§Ø®ØªØ± Ø´Ø±ÙŠØ· Ø£Ùˆ Ù„Ø§. Ø­Ø¬Ù… Ø§Ù„Ø´Ø±ÙŠØ· Ù…Ø¶Ø¨ÙˆØ· Ø­ØªÙ‰ Ù„Ø§ ÙŠØ£ÙƒÙ„ Ø§Ù„ØµÙØ­Ø©.</div>
    </div>
    <div>
      <label>Ø£Ù„ÙˆØ§Ù† ÙˆØ±Ù‚Ø© Ø§Ù„Ø³ÙŠØ±Ø©/ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
      <div class="grid two">
        <div>
          <input id="i_accent" type="color" class="input" value="#3a6ea5" />
          <div class="help">Ù„ÙˆÙ† Ø§Ù„Ø´Ø±ÙŠØ· (Ø¯Ø§Ø®Ù„ Ø§Ù„ÙˆØ±Ù‚Ø©).</div>
        </div>
        <div>
          <input id="i_ui" type="color" class="input" value="#2563eb" />
          <div class="help">Ù„ÙˆÙ† Ø§Ù„Ø£Ø²Ø±Ø§Ø± (Ø®Ø§Ø±Ø¬ Ø§Ù„ÙˆØ±Ù‚Ø©).</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© -->
<div class="sheet-wrap">
  <div class="sheet with-sidebar" id="sheet">
    <div class="bar" id="bar">
      <div class="side-card" id="sideCard">
        <h3 style="margin-top:0">Ø§Ù„ØªÙˆØ§ØµÙ„</h3>
        <div id="v_contact" style="font-size:13px;line-height:1.6"></div>
        <h3 style="margin-top:10px">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</h3>
        <div id="v_skills_side" class="chips"></div>
        <h3 style="margin-top:10px">Ø§Ù„Ù„ØºØ§Øª</h3>
        <div id="v_langs_side" class="chips"></div>
      </div>
    </div>
    <div class="content">
      <h1 id="v_name">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</h1>
      <div class="meta" id="v_meta"></div>

      <h3>Ø§Ù„Ù…Ù„Ø®Øµ</h3>
      <p id="v_summary" style="margin:6px 0 10px"></p>

      <h3>Ø§Ù„Ø®Ø¨Ø±Ø§Øª</h3>
      <div id="v_exp"></div>

      <h3>Ø§Ù„ØªØ¹Ù„ÙŠÙ…</h3>
      <div id="v_edu"></div>
    </div>
  </div>
</div>

<script>
const $=s=>document.querySelector(s); const $$=s=>Array.from(document.querySelectorAll(s));
const KEY='cv_manual_preview_v1';

/* ØªØ­ÙˆÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ù†ØµÙŠØ© Ø¥Ù„Ù‰ Chips */
function chips(str){
  const frag=document.createDocumentFragment();
  str.split(/,|ØŒ/).map(s=>s.trim()).filter(Boolean).forEach(t=>{
    const sp=document.createElement('span'); sp.className='chip'; sp.textContent=t; frag.appendChild(sp);
  }); return frag;
}

/* Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ÙŠØ¯ÙˆÙŠØ© ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "Ù…Ø¹Ø§ÙŠÙ†Ø©" */
function preview(){
  // ÙØµÙ„ Ø§Ù„Ø£Ù„ÙˆØ§Ù†: ÙˆØ±Ù‚Ø© Ø§Ù„Ø³ÙŠØ±Ø©
  document.documentElement.style.setProperty('--accent', $('#i_accent').value || '#3a6ea5');
  // Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
  document.documentElement.style.setProperty('--ui-brand', $('#i_ui').value || '#2563eb');

  // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨
  const tpl = document.querySelector('input[name="tpl"]:checked')?.value || 'sidebar';
  const sheet = $('#sheet');
  if(tpl==='sidebar') sheet.classList.add('with-sidebar'); else sheet.classList.remove('with-sidebar');

  // Ø§Ø³Ù… + Ù…ÙŠØªØ§
  $('#v_name').textContent = $('#i_name').value || 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„';
  const meta=[];
  if($('#i_title').value) meta.push($('#i_title').value);
  if($('#i_email').value) meta.push($('#i_email').value);
  if($('#i_phone').value) meta.push($('#i_phone').value);
  if($('#i_city').value)  meta.push($('#i_city').value);
  if($('#i_site').value)  meta.push($('#i_site').value);
  $('#v_meta').textContent = meta.join(' â€¢ ');

  // Ù…Ù„Ø®Øµ
  $('#v_summary').textContent = $('#i_summary').value || '';

  // Ø®Ø¨Ø±Ø§Øª/ØªØ¹Ù„ÙŠÙ… (HTML Ø¨Ø³ÙŠØ·)
  $('#v_exp').innerHTML = $('#i_exp').value || '';
  $('#v_edu').innerHTML = $('#i_edu').value || '';

  // Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©: ØªÙˆØ§ØµÙ„/Ù…Ù‡Ø§Ø±Ø§Øª/Ù„ØºØ§Øª
  const contactHTML = [$('#i_email').value,$('#i_phone').value,$('#i_city').value,$('#i_site').value]
    .filter(Boolean).join('<br>');
  $('#v_contact').innerHTML = contactHTML || '';

  const s=$('#v_skills_side'); s.innerHTML=''; s.appendChild(chips($('#i_skills').value||''));
  const l=$('#v_langs_side'); l.innerHTML=''; l.appendChild(chips($('#i_langs').value||''));
}

/* Ø­ÙØ¸/Ø§Ø³ØªØ±Ø¬Ø§Ø¹ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„ÙƒÙ†Ù‡ Ù…ÙÙŠØ¯) */
function save(){
  const data={
    name:$('#i_name').value,title:$('#i_title').value,email:$('#i_email').value,phone:$('#i_phone').value,
    city:$('#i_city').value,site:$('#i_site').value,summary:$('#i_summary').value,
    skills:$('#i_skills').value,langs:$('#i_langs').value,exp:$('#i_exp').value,edu:$('#i_edu').value,
    accent:$('#i_accent').value,ui:$('#i_ui').value,tpl:document.querySelector('input[name="tpl"]:checked')?.value||'sidebar'
  };
  localStorage.setItem(KEY, JSON.stringify(data));
  alert('ØªÙ… Ø§Ù„Ø­ÙØ¸.');
}
function load(){
  const raw=localStorage.getItem(KEY);
  if(!raw){ alert('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©.'); return; }
  try{
    const d=JSON.parse(raw);
    $('#i_name').value=d.name||''; $('#i_title').value=d.title||'';
    $('#i_email').value=d.email||''; $('#i_phone').value=d.phone||'';
    $('#i_city').value=d.city||''; $('#i_site').value=d.site||'';
    $('#i_summary').value=d.summary||''; $('#i_skills').value=d.skills||'';
    $('#i_langs').value=d.langs||''; $('#i_exp').value=d.exp||''; $('#i_edu').value=d.edu||'';
    $('#i_accent').value=d.accent||'#3a6ea5'; $('#i_ui').value=d.ui||'#2563eb';
    if(d.tpl){ $$('input[name="tpl"]').forEach(r=>r.checked=(r.value===d.tpl)); }
    alert('ØªÙ… Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹.'); 
  }catch{ alert('ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹.'); }
}

/* Ø·Ø¨Ø§Ø¹Ø© PDF Ø¯Ù‚ÙŠÙ‚Ø© */
function enterPrint(){ document.body.classList.add('print-mode'); }
function exitPrint(){ document.body.classList.remove('print-mode'); }
function printPDF(){ enterPrint(); setTimeout(()=>{ window.print(); setTimeout(exitPrint,800); },60); }

/* Ø£Ø²Ø±Ø§Ø± */
$('#btnPreview').addEventListener('click', preview);
$('#btnPrint').addEventListener('click', printPDF);
$('#btnToggle').addEventListener('click', ()=>{ const ed=$('#editor'); ed.style.display = (ed.style.display==='none'?'block':'none'); });

/* Ø§Ø®ØªØµØ§Ø±: Ctrl/Cmd + P ÙŠÙ†ØµØ­ Ø¨Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
window.addEventListener('keydown',e=>{
  if((e.ctrlKey||e.metaKey)&&e.key.toLowerCase()==='p'){ if(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©ØŸ')) preview(); }
});

/* ØªÙ‡ÙŠØ¦Ø© Ù…Ø¨Ø¯Ø¦ÙŠØ©: Ø­Ù…Ù‘Ù„ Ø¥Ù† ÙˆØ¬Ø¯ Ø«Ù… Ø§Ø¹Ø±Ø¶ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø£ÙˆÙ„Ù‰ */
(function init(){
  const raw=localStorage.getItem(KEY);
  if(raw){ try{ const d=JSON.parse(raw);
    $('#i_name').value=d.name||''; $('#i_title').value=d.title||'';
    $('#i_email').value=d.email||''; $('#i_phone').value=d.phone||'';
    $('#i_city').value=d.city||''; $('#i_site').value=d.site||'';
    $('#i_summary').value=d.summary||''; $('#i_skills').value=d.skills||'';
    $('#i_langs').value=d.langs||''; $('#i_exp').value=d.exp||''; $('#i_edu').value=d.edu||'';
    $('#i_accent').value=d.accent||'#3a6ea5'; $('#i_ui').value=d.ui||'#2563eb';
    if(d.tpl){ $$('input[name="tpl"]').forEach(r=>r.checked=(r.value===d.tpl)); }
  }catch{} }
  preview(); // Ù…Ø¹Ø§ÙŠÙ†Ø© Ø£ÙˆÙ„Ù‰ Ø¨Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
})();
</script>
</body>
</html>
