<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ØµØ§Ù†Ø¹ Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ© â€” Ù…Ø¹Ø§ÙŠÙ†Ø© ÙÙˆØ±ÙŠØ© ÙˆØªØµØ¯ÙŠØ± PDF</title>

<style>
/* ===== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ===== */
:root{
  /* Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„Ù‡ÙŠØ¯Ø±) â€” Ù…Ù†ÙØµÙ„Ø© Ø¹Ù† Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø³ÙŠØ±Ø© */
  --ui-brand:#2563eb;      /* Ø£Ø²Ø±Ù‚ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© */
  --ui-brand-2:#1e3a8a;
  --site-bg:#dce6f2;       /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø£Ø²Ø±Ù‚ Ø¨Ø§Ù‡Øª) */

  /* Ø£Ù„ÙˆØ§Ù† ØµÙØ­Ø© Ø§Ù„Ø³ÙŠØ±Ø© (Ø§Ù„ÙˆØ±Ù‚Ø© Ù†ÙØ³Ù‡Ø§) */
  --accent:#3a6ea5;        /* Ù„ÙˆÙ† Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ */
  --text:#0b1220;          /* Ù„ÙˆÙ† Ù†Øµ Ø§Ù„ÙˆØ±Ù‚Ø© */
  --muted:#475569;
  --chip:#1f2937;

  /* Ù‚ÙŠØ§Ø³Ø§Øª */
  --bar-w:58mm;            /* Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ (Ù…Ù†Ø§Ø³Ø¨ Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©) */
  --sheet-w:210mm;
  --sheet-h:297mm;
  --radius:14px;
}

/* ===== Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ ===== */
*{box-sizing:border-box}
html,body{margin:0}
body{
  font-family:"Tajawal",system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:var(--site-bg);
  color:#0b1220;
}

/* Ù‡ÙŠØ¯Ø± Ø¨Ø³ÙŠØ· */
.header{
  max-width:980px;margin:16px auto 8px;padding:0 12px;
  display:flex;align-items:center;gap:12px;justify-content:space-between;
}
.brand{display:flex;align-items:center;gap:10px;font-weight:800}
.badge{padding:6px 10px;border-radius:999px;background:#fff;border:1px solid rgba(2,6,23,.12);font-size:12px;color:#334155}

/* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª */
.toolbar{
  max-width:980px;margin:0 auto 10px;padding:12px;display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:center
}
.btn{
  appearance:none;border:none;cursor:pointer;
  padding:10px 14px;border-radius:10px;
  background:linear-gradient(135deg,var(--ui-brand),var(--ui-brand-2));
  color:#fff;font-weight:800;box-shadow:0 6px 14px rgba(0,0,0,.18)
}
.btn.ghost{background:#ffffff;color:#0b1220;border:1px solid rgba(2,6,23,.15);box-shadow:none;font-weight:700}
.input,textarea,select{
  width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(2,6,23,.15);
  background:#fff;color:#0b1220;outline:none
}
label{font-weight:700;font-size:13px;margin-bottom:6px;display:block}
.help{font-size:12px;color:#64748b;margin:4px 2px 8px}

/* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ */
.editor{
  max-width:980px;margin:0 auto 14px;padding:12px;background:#fff;border-radius:14px;border:1px solid rgba(2,6,23,.12)
}
.grid{display:grid;gap:12px}
.two{grid-template-columns:1fr 1fr}
.three{grid-template-columns:repeat(3,1fr)}
@media (max-width:860px){.two,.three{grid-template-columns:1fr}}

/* ===== Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ÙˆØ±Ù‚Ø© ===== */
.sheet-wrap{
  max-width:calc(var(--sheet-w) + 32px);
  margin:0 auto 40px;padding:16px;border-radius:16px;
  background:#ffffffb3;border:1px solid rgba(2,6,23,.08)
}
.sheet{
  width:var(--sheet-w);min-height:var(--sheet-h);
  background:#fff;position:relative;border-radius:var(--radius);
  box-shadow:0 24px 60px rgba(0,0,0,.22);overflow:hidden;
  color:var(--text)
}

/* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ ÙƒØ¹Ù†ØµØ± Ø­Ù‚ÙŠÙ‚ÙŠ */
.sheet.with-sidebar .bar{
  position:absolute;inset:0 0 0 auto;width:var(--bar-w);background:var(--accent);
  border-radius:0 var(--radius) var(--radius) 0;color:#fff;padding:18mm 12mm 18mm 12mm
}
[dir="rtl"] .sheet.with-sidebar .bar{left:0;right:auto;border-radius:var(--radius) 0 0 var(--radius)}

/* Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙˆØ±Ù‚Ø© */
.content{position:relative;z-index:2;padding:18mm 18mm}
.sheet.with-sidebar .content{padding-inline-end:calc(18mm + var(--bar-w) + 6mm)} /* Ø§ØªØ±Ùƒ Ù…ÙƒØ§Ù† Ù„Ù„Ø´Ø±ÙŠØ· */
h1,h2,h3{margin:0 0 8px}
h1{font-size:26px}
h2{font-size:20px}
h3{font-size:16px;border-bottom:2px solid var(--chip);display:inline-block;padding-bottom:2px;margin-top:14px}
.meta{display:flex;gap:12px;flex-wrap:wrap;color:#334155}
.chips{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
.chip{border:1px solid var(--chip);border-radius:999px;padding:6px 10px;font-size:12px}

/* ØµÙ†Ø¯ÙˆÙ‚ Ø¬Ø§Ù†Ø¨ÙŠ ÙÙˆÙ‚ Ø§Ù„Ø´Ø±ÙŠØ· */
.side-card{
  position:absolute;z-index:3;top:18mm;inset-inline-end:12mm;width:calc(var(--bar-w) - 24mm);
  background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:10px 12px;color:#0b1220
}
[dir="rtl"] .side-card{inset-inline-start:12mm;inset-inline-end:auto}

/* ===== ÙˆØ¶Ø¹ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¯Ù‚ÙŠÙ‚ ===== */
.print-mode .header,.print-mode .toolbar,.print-mode .editor{display:none!important}
.print-mode body,.print-mode .sheet-wrap{background:#fff!important}
.print-mode .sheet{box-shadow:none;border-radius:0}
@media print{
  body{margin:0;background:#fff!important}
  .header,.toolbar,.editor{display:none!important}
  .sheet-wrap{max-width:unset;border:0;padding:0;margin:0;background:#fff!important}
  .sheet{width:210mm!important;min-height:297mm!important;border-radius:0;box-shadow:none}
  @page{size:A4;margin:0}
}

/* ØªØ­Ø³ÙŠÙ† Ù…ÙˆØ¨Ø§ÙŠÙ„ */
@media (max-width:480px){
  :root{--bar-w:44mm}
  .sheet.with-sidebar .content{padding:14mm}
  .sheet.with-sidebar .side-card{display:none} /* ÙˆÙØ± Ù…Ø³Ø§Ø­Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
}
</style>
</head>
<body>

<!-- ===== Ø±Ø£Ø³ Ø§Ù„ØµÙØ­Ø© ===== -->
<div class="header">
  <div class="brand">ğŸ“„ <span>ØµØ§Ù†Ø¹ Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ©</span></div>
  <span class="badge">Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© ÙÙˆØ±ÙŠØ© â€¢ PDF Ù†Ø¸ÙŠÙ</span>
</div>

<!-- ===== Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª (Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ø¬Ù‡Ø© Ù…Ø³ØªÙ‚Ù„Ø©) ===== -->
<div class="toolbar">
  <button class="btn" id="btnPrint">ØªØµØ¯ÙŠØ± PDF</button>
  <button class="btn ghost" id="btnToggleEditor">Ø¥Ø¸Ù‡Ø§Ø± / Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</button>
</div>

<!-- ===== Ù„ÙˆØ­Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ (Ù…Ø¹ ØªÙ„Ù…ÙŠØ­Ø§Øª ÙˆØ§Ø¶Ø­Ø©) ===== -->
<div class="editor" id="editor">
  <div class="grid two">
    <div>
      <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
      <input id="i_name" class="input" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ Ø£Ùˆ Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ" />
      <div class="help">Ù…Ø«Ø§Ù„: Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ Ù…Ø­Ù…Ø¯ Ø§Ù„Ø­ÙƒÙ…</div>
    </div>
    <div>
      <label>Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</label>
      <input id="i_title" class="input" placeholder="Ø¹Ø±Ù‘Ù Ø¯ÙˆØ±Ùƒ Ø¨Ø¥ÙŠØ¬Ø§Ø²" />
      <div class="help">Ù…Ø«Ø§Ù„: Ù…Ø·ÙˆÙ‘Ø± ÙˆØ§Ø¬Ù‡Ø§Øª Ø£Ù…Ø§Ù…ÙŠØ© | React</div>
    </div>
  </div>

  <div class="grid three">
    <div>
      <label>Ø§Ù„Ø¨Ø±ÙŠØ¯</label>
      <input id="i_email" class="input" placeholder="Ø¨Ø±ÙŠØ¯ Ø§Ø­ØªØ±Ø§ÙÙŠ ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ø³ÙŠØ±Ø©" />
      <div class="help">Ù…Ø«Ø§Ù„: name.lastname@gmail.com</div>
    </div>
    <div>
      <label>Ø§Ù„Ù‡Ø§ØªÙ</label>
      <input id="i_phone" class="input" placeholder="Ø±Ù‚Ù… Ù…Ø¹ Ø±Ù…Ø² Ø§Ù„Ø¯ÙˆÙ„Ø©" />
      <div class="help">Ù…Ø«Ø§Ù„: +49 151 2345678</div>
    </div>
    <div>
      <label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</label>
      <input id="i_city" class="input" placeholder="Ù…ÙƒØ§Ù† Ø§Ù„Ø¥Ù‚Ø§Ù…Ø© Ø§Ù„Ø­Ø§Ù„ÙŠ" />
      <div class="help">Ù…Ø«Ø§Ù„: Berlin, DE</div>
    </div>
  </div>

  <div>
    <label>Ø§Ù„Ø±Ø§Ø¨Ø· (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
    <input id="i_site" class="input" placeholder="LinkedIn / Ù…ÙˆÙ‚Ø¹ Ø´Ø®ØµÙŠ" />
    <div class="help">Ù…Ø«Ø§Ù„: linkedin.com/in/username</div>
  </div>

  <div>
    <label>Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ù‡Ù†ÙŠ</label>
    <textarea id="i_summary" rows="3" class="input" placeholder="3â€“4 Ø¬Ù…Ù„ ØªÙˆØ¶Ù‘Ø­ Ø®Ø¨Ø±ØªÙƒØŒ Ø£Ù‡Ù… Ø¥Ù†Ø¬Ø§Ø²ØŒ ÙˆÙ…Ø§ ØªØ¨Ø­Ø« Ø¹Ù†Ù‡"></textarea>
    <div class="help">Ù†ØµÙŠØ­Ø©: Ø§ÙƒØªØ¨ Ø¨Ù„ØºØ© Ø¨Ø³ÙŠØ·Ø© ÙˆÙ†ØªØ§Ø¦Ø¬ Ù…Ù„Ù…ÙˆØ³Ø©.</div>
  </div>

  <div class="grid two">
    <div>
      <label>Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª (Ø§ÙØµÙ„ Ø¨ÙÙˆØ§ØµÙ„)</label>
      <input id="i_skills" class="input" placeholder="JavaScript, React, CSS, Git" />
      <div class="help">Ø±ØªÙ‘Ø¨ Ù…Ù† Ø§Ù„Ø£Ù‚ÙˆÙ‰ Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø¶Ø¹Ù.</div>
    </div>
    <div>
      <label>Ø§Ù„Ù„ØºØ§Øª (Ø§ÙØµÙ„ Ø¨ÙÙˆØ§ØµÙ„)</label>
      <input id="i_langs" class="input" placeholder="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ø£Ù…)ØŒ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© B2" />
      <div class="help">Ø§Ø°ÙƒØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø¥Ù† Ø£Ù…ÙƒÙ†.</div>
    </div>
  </div>

  <div class="grid two">
    <div>
      <label>Ø§Ù„Ø®Ø¨Ø±Ø§Øª â€” HTML Ø¨Ø³ÙŠØ·</label>
      <textarea id="i_exp" rows="5" class="input" placeholder="<p><strong>Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙØ©</strong> â€” Ø§Ù„Ø´Ø±ÙƒØ© <span style='color:#64748b'>2022â€“Ø§Ù„Ø¢Ù†</span><br>Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ù…Ø®ØªØµØ±Ø© Ø¨Ù†Ù‚Ø§Ø·.</p>"></textarea>
      <div class="help">ÙŠÙ…ÙƒÙ†Ùƒ Ù†Ø³Ø® ÙÙ‚Ø±Ø§ØªØ› ÙŠÙØ³Ù…Ø­ Ø¨Ù€ &lt;strong&gt; Ùˆ &lt;br&gt; Ùˆ &lt;p&gt;.</div>
    </div>
    <div>
      <label>Ø§Ù„ØªØ¹Ù„ÙŠÙ… â€” HTML Ø¨Ø³ÙŠØ·</label>
      <textarea id="i_edu" rows="5" class="input" placeholder="<p><strong>Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠÙˆØ³ Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³ÙˆØ¨</strong> â€” Ø¬Ø§Ù…Ø¹Ø© X <span style='color:#64748b'>2021</span><br>Ù…Ø´Ø±ÙˆØ¹ ØªØ®Ø±Ø¬ / Ù…Ø¹Ø¯Ù„.</p>"></textarea>
      <div class="help">Ø£Ø¶Ù Ø£ÙƒØ«Ø± Ù…Ù† ÙÙ‚Ø±Ø© Ù„Ùˆ Ø£Ø±Ø¯Øª.</div>
    </div>
  </div>

  <div class="grid two">
    <div>
      <label>Ø§Ù„Ù‚Ø§Ù„Ø¨</label>
      <div style="display:flex;gap:12px;align-items:center">
        <label><input type="radio" name="tpl" value="sidebar" checked> Ø´Ø±ÙŠØ· Ø¬Ø§Ù†Ø¨ÙŠ</label>
        <label><input type="radio" name="tpl" value="classic"> Ø¨Ø¯ÙˆÙ† Ø´Ø±ÙŠØ·</label>
      </div>
      <div class="help">Ø¨Ø¯Ù‘Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù‚Ø§Ù„Ø¨ÙŠÙ† ÙÙˆØ±Ù‹Ø§.</div>
    </div>
    <div>
      <label>Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø³ÙŠØ±Ø©</label>
      <div class="grid two">
        <div>
          <input id="i_accent" type="color" class="input" value="#3a6ea5" />
          <div class="help">Ù„ÙˆÙ† Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ (Ø¯Ø§Ø®Ù„ Ø§Ù„ÙˆØ±Ù‚Ø©).</div>
        </div>
        <div>
          <input id="i_ui" type="color" class="input" value="#2563eb" />
          <div class="help">Ù„ÙˆÙ† Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ø®Ø§Ø±Ø¬ Ø§Ù„ÙˆØ±Ù‚Ø©).</div>
        </div>
      </div>
    </div>
  </div>

  <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:6px">
    <button class="btn" id="btnSave">Ø­ÙØ¸</button>
    <button class="btn ghost" id="btnLoad">Ø§Ø³ØªØ±Ø¬Ø§Ø¹</button>
    <button class="btn ghost" id="btnClear">Ø­Ø°Ù Ø§Ù„ÙƒÙ„</button>
  </div>
</div>

<!-- ===== Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© ===== -->
<div class="sheet-wrap">
  <div class="sheet with-sidebar" id="sheet">
    <div class="bar" id="bar">
      <!-- Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© ÙÙˆÙ‚ Ø§Ù„Ø´Ø±ÙŠØ· (ØªØ¸Ù‡Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©) -->
      <div class="side-card" id="sideCard">
        <h3 style="margin-top:0">Ø§Ù„ØªÙˆØ§ØµÙ„</h3>
        <div id="v_contact" style="font-size:13px;line-height:1.6"></div>
        <h3 style="margin-top:10px">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</h3>
        <div id="v_skills_side" class="chips"></div>
        <h3 style="margin-top:10px">Ø§Ù„Ù„ØºØ§Øª</h3>
        <div id="v_langs_side" class="chips"></div>
      </div>
    </div>

    <div class="content">
      <h1 id="v_name">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</h1>
      <div class="meta" id="v_meta"></div>

      <h3>Ø§Ù„Ù…Ù„Ø®Øµ</h3>
      <p id="v_summary" style="margin:6px 0 10px"></p>

      <h3>Ø§Ù„Ø®Ø¨Ø±Ø§Øª</h3>
      <div id="v_exp"></div>

      <h3>Ø§Ù„ØªØ¹Ù„ÙŠÙ…</h3>
      <div id="v_edu"></div>
    </div>
  </div>
</div>

<script>
/* ===== Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ ===== */
const KEY='cv_onefile_v1';
const $=s=>document.querySelector(s);
const $$=s=>Array.from(document.querySelectorAll(s));

function chipify(listStr){
  const wrap=document.createDocumentFragment();
  listStr.split(/,|ØŒ/).map(s=>s.trim()).filter(Boolean).forEach(txt=>{
    const sp=document.createElement('span'); sp.className='chip'; sp.textContent=txt; wrap.appendChild(sp);
  });
  return wrap;
}
function setText(id,txt){ const el=document.getElementById(id); if(el) el.textContent=txt||''; }
function setHTML(id,html){ const el=document.getElementById(id); if(el) el.innerHTML=html||''; }

function render(){
  // Ø£Ù„ÙˆØ§Ù† Ù…Ù†ÙØµÙ„Ø©
  document.documentElement.style.setProperty('--accent', $('#i_accent').value || '#3a6ea5');
  document.documentElement.style.setProperty('--ui-brand', $('#i_ui').value || '#2563eb');

  // Ø§Ø³Ù… + Ù…ÙŠØªØ§
  setText('v_name',$('#i_name').value || 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„');
  const metaItems=[];
  if($('#i_title').value) metaItems.push($('#i_title').value);
  if($('#i_email').value) metaItems.push($('#i_email').value);
  if($('#i_phone').value) metaItems.push($('#i_phone').value);
  if($('#i_city').value)  metaItems.push($('#i_city').value);
  if($('#i_site').value)  metaItems.push($('#i_site').value);
  $('#v_meta').textContent = metaItems.join(' â€¢ ');

  // Ù…Ù„Ø®Øµ
  setText('v_summary',$('#i_summary').value);

  // Ø®Ø¨Ø±Ø§Øª/ØªØ¹Ù„ÙŠÙ… (ÙŠØ³Ù…Ø­ Ø¨Ù€ HTML Ø¨Ø³ÙŠØ·)
  setHTML('v_exp',$('#i_exp').value);
  setHTML('v_edu',$('#i_edu').value);

  // Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø´Ø±ÙŠØ·: ØªÙˆØ§ØµÙ„/Ù…Ù‡Ø§Ø±Ø§Øª/Ù„ØºØ§Øª
  const contactHTML = [
    $('#i_email').value, $('#i_phone').value, $('#i_city').value, $('#i_site').value
  ].filter(Boolean).join('<br>');
  setHTML('v_contact',contactHTML);

  const skillsWrap=$('#v_skills_side'); skillsWrap.innerHTML=''; skillsWrap.appendChild(chipify($('#i_skills').value));
  const langsWrap=$('#v_langs_side'); langsWrap.innerHTML='';  langsWrap.appendChild(chipify($('#i_langs').value));

  // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù‚Ø§Ù„Ø¨
  const sheet=$('#sheet');
  const tplVal=$('input[name="tpl"]:checked').value;
  if(tplVal==='sidebar'){
    sheet.classList.add('with-sidebar');
  }else{
    sheet.classList.remove('with-sidebar');
  }
}

function save(){
  const data={
    name:$('#i_name').value,title:$('#i_title').value,email:$('#i_email').value,phone:$('#i_phone').value,city:$('#i_city').value,site:$('#i_site').value,
    summary:$('#i_summary').value,skills:$('#i_skills').value,langs:$('#i_langs').value,exp:$('#i_exp').value,edu:$('#i_edu').value,
    accent:$('#i_accent').value, ui:$('#i_ui').value, tpl: $('input[name="tpl"]:checked').value
  };
  localStorage.setItem(KEY, JSON.stringify(data));
  render();
  alert('ØªÙ… Ø§Ù„Ø­ÙØ¸.');
}
function load(){
  const raw=localStorage.getItem(KEY);
  if(!raw){ alert('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©.'); return; }
  try{
    const d=JSON.parse(raw);
    $('#i_name').value=d.name||''; $('#i_title').value=d.title||'';
    $('#i_email').value=d.email||''; $('#i_phone').value=d.phone||'';
    $('#i_city').value=d.city||''; $('#i_site').value=d.site||'';
    $('#i_summary').value=d.summary||''; $('#i_skills').value=d.skills||'';
    $('#i_langs').value=d.langs||''; $('#i_exp').value=d.exp||''; $('#i_edu').value=d.edu||'';
    $('#i_accent').value=d.accent||'#3a6ea5'; $('#i_ui').value=d.ui||'#2563eb';
    if(d.tpl){ $$('input[name="tpl"]').forEach(r=>r.checked=(r.value===d.tpl)); }
    render(); alert('ØªÙ… Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹.');
  }catch(e){ alert('ØªØ¹Ø°Ù‘Ø± Ø§Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹.'); }
}
function clearAll(){
  if(!confirm('Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ')) return;
  localStorage.removeItem(KEY);
  $$('input,textarea').forEach(el=>{ if(el.id.startsWith('i_')) el.value=''; });
  $$('input[name="tpl"]').forEach(r=> r.checked=(r.value==='sidebar'));
  render();
}

/* Ø£Ø­Ø¯Ø§Ø« */
$('#btnSave').onclick=save;
$('#btnLoad').onclick=load;
$('#btnClear').onclick=clearAll;
$('#btnToggleEditor').onclick=()=>{ const ed=$('#editor'); ed.style.display=(ed.style.display==='none'?'block':'none'); };
['#i_name','#i_title','#i_email','#i_phone','#i_city','#i_site','#i_summary','#i_skills','#i_langs','#i_exp','#i_edu','#i_accent','#i_ui']
  .forEach(id=>$(id).addEventListener('input',render));
$$('input[name="tpl"]').forEach(r=> r.addEventListener('change',render));

/* Ø·Ø¨Ø§Ø¹Ø© PDF Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø© */
function enterPrint(){ document.body.classList.add('print-mode'); }
function exitPrint(){ document.body.classList.remove('print-mode'); }
$('#btnPrint').addEventListener('click', async ()=>{
  enterPrint();
  await new Promise(r=>setTimeout(r,60));
  window.print();
  setTimeout(exitPrint, 800);
});

/* Ø¨Ø¯Ø§ÙŠØ©: Ø­Ù…Ù‘Ù„ Ø¥Ù† ÙˆÙØ¬Ø¯ ÙˆØ­Ø³Ù‘Ù† Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© */
(function init(){
  const raw=localStorage.getItem(KEY);
  if(raw){ try{
    const d=JSON.parse(raw);
    $('#i_name').value=d.name||''; $('#i_title').value=d.title||'';
    $('#i_email').value=d.email||''; $('#i_phone').value=d.phone||'';
    $('#i_city').value=d.city||''; $('#i_site').value=d.site||'';
    $('#i_summary').value=d.summary||''; $('#i_skills').value=d.skills||'';
    $('#i_langs').value=d.langs||''; $('#i_exp').value=d.exp||''; $('#i_edu').value=d.edu||'';
    $('#i_accent').value=d.accent||'#3a6ea5'; $('#i_ui').value=d.ui||'#2563eb';
    if(d.tpl){ $$('input[name="tpl"]').forEach(r=>r.checked=(r.value===d.tpl)); }
  }catch(_){/* ØªØ¬Ø§Ù‡Ù„ */} }
  render();
})();
</script>

</body>
</html>
